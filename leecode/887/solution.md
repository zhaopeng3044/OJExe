# [LeetCode 887 Super Egg Drop](https://leetcode.com/problems/super-egg-drop/)

## 题目
给定K个鸡蛋和最高楼层N（楼层从1层开始），找到楼层F满足：从高于F的楼层丢下鸡蛋会摔碎；从等于或低于F楼层丢下鸡蛋，鸡蛋不会被摔碎。对于指定的K和N，找到对应的F至少需要试几次。对应没有摔碎的鸡蛋，还可以接着用来测试。

## 极端情况考虑

### 假如只有一个鸡蛋
如果只有一个鸡蛋，需要从1层到N层逐层测试，结果为N。

### 假如有无限鸡蛋
如果鸡蛋数量没有限制，二分查找的次数应该是最优解。
$$ f(N) = 1 + max(f((1+N) \div 2 - 1), f(N-(1+N) \div 2)) $$

## 考虑鸡蛋数量的限制

### 思维误区
假设计算两个鸡蛋，100层楼：f(2, 100)。如果仍然使用二分查找的方式第一次在50层尝试：
$$ f(2, 100) = 1 + max(f(1, 49), f(2, 50)) = 50 $$
显然第一次选择在50层楼扔鸡蛋得不到最优解。

### 当鸡蛋数量少于二分查找需要的次数
只要确定了第一个鸡蛋在哪层楼丢最合适，剩余步骤可以理解为N-1的子问题，通过递归和查表即可解决。
$$ f(K, N) = 1 + max(f(K-1, x-1), f(K, N-x)) $$

#### 代码技巧
- 在程序初始化时朴素的枚举所有的K和N，容易爆超计算超时。可以利用计算N-1时，最优解选择的楼层开始枚举，测试通过。
- 不在程序初始化时枚举所有的计算结果，在计算过程中把中间结果缓存下来。测试超时，因为未命中缓存时，需要从2层楼开始枚举。